{"ast":null,"code":"var _jsxFileName = \"/home/nus/TuTran/projects/Web/training/photobook/FE/src/app/views/pages/Blog/BlogList/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport BlogQueries from 'graphql/queries/Blog';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { withSnackbar } from 'notistack';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport moment from 'moment';\nimport BlogListItemSkeleton from 'app/views/components/Skeletons/BlogListItemSkeleton';\n\nfunction BlogList(props) {\n  const history = useHistory();\n  const params = useParams();\n  const [data, setData] = useState([]); // GET BLOGS\n\n  const [getBlogs, blogsData] = useLazyQuery(BlogQueries.GET_BLOGS, {\n    variables: {\n      limit: 10\n    },\n    fetchPolicy: 'network-only',\n    onCompleted: res => handleGetBlogsSuccess(res),\n    onError: err => handleGetBlogsError(err)\n  });\n  useEffect(() => {\n    getBlogs();\n  }, []);\n\n  const handleGetBlogsSuccess = res => {\n    setData(res.posts);\n  };\n\n  const handleGetBlogsError = err => {\n    // let message = getMessage(err.message);\n    setData([]);\n  };\n\n  const handleRouteBlog = id => {\n    history.push(`/blog/${id}`);\n  };\n\n  const handleRouteUser = id => {\n    history.push(`/user/${id}`);\n  };\n\n  console.log(data);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"kt-portlet kt-portlet--height-fluid mt-xs-4 mt-md-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"kt-portlet__head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"kt-portlet__head-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"kt-portlet__head-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 6\n    }\n  }, \"Trending blogs\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"kt-portlet__body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"kt-widget4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, blogsData.loading && /*#__PURE__*/React.createElement(BlogListItemSkeleton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 28\n    }\n  }), data.map(blog => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: blog.id,\n      className: \"kt-widget4__item \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"kt-widget4__pic kt-widget4__pic--pic \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"Blog image\",\n      style: {\n        width: '7.5rem'\n      },\n      src: blog.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 10\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"kt-widget4__info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      style: {\n        fontSize: '1.2rem'\n      },\n      className: \"kt-widget4__username\",\n      onClick: () => handleRouteBlog(blog.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 10\n      }\n    }, blog.title), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"kt-widget4__text\",\n      onClick: () => handleRouteBlog(blog.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 10\n      }\n    }, moment(blog.createdAt).format('DD-MMM-YYYY'), ' '), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"kt-widget4__text\",\n      onClick: () => handleRouteUser(blog.author._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 10\n      }\n    }, blog.author.username)));\n  }))));\n}\n\nexport default injectIntl(withSnackbar(BlogList));","map":{"version":3,"sources":["/home/nus/TuTran/projects/Web/training/photobook/FE/src/app/views/pages/Blog/BlogList/index.js"],"names":["React","useEffect","useState","useLazyQuery","useMutation","BlogQueries","useHistory","useParams","withSnackbar","FormattedMessage","injectIntl","moment","BlogListItemSkeleton","BlogList","props","history","params","data","setData","getBlogs","blogsData","GET_BLOGS","variables","limit","fetchPolicy","onCompleted","res","handleGetBlogsSuccess","onError","err","handleGetBlogsError","posts","handleRouteBlog","id","push","handleRouteUser","console","log","loading","map","blog","width","image","fontSize","title","createdAt","format","author","_id","username"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport BlogQueries from 'graphql/queries/Blog';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { withSnackbar } from 'notistack';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport moment from 'moment';\nimport BlogListItemSkeleton from 'app/views/components/Skeletons/BlogListItemSkeleton';\n\nfunction BlogList(props) {\n\tconst history = useHistory();\n\tconst params = useParams();\n\tconst [data, setData] = useState([]);\n\n\t// GET BLOGS\n\tconst [getBlogs, blogsData] = useLazyQuery(BlogQueries.GET_BLOGS, {\n\t\tvariables: { limit: 10 },\n\t\tfetchPolicy: 'network-only',\n\t\tonCompleted: res => handleGetBlogsSuccess(res),\n\t\tonError: err => handleGetBlogsError(err),\n\t});\n\tuseEffect(() => {\n\t\tgetBlogs();\n\t}, []);\n\n\tconst handleGetBlogsSuccess = res => {\n\t\tsetData(res.posts);\n\t};\n\n\tconst handleGetBlogsError = err => {\n\t\t// let message = getMessage(err.message);\n\t\tsetData([]);\n\t};\n\n\tconst handleRouteBlog = id => {\n\t\thistory.push(`/blog/${id}`);\n\t};\n\n\tconst handleRouteUser = id => {\n\t\thistory.push(`/user/${id}`);\n\t};\n\n\tconsole.log(data);\n\treturn (\n\t\t<div className=\"kt-portlet kt-portlet--height-fluid mt-xs-4 mt-md-0\">\n\t\t\t<div className=\"kt-portlet__head\">\n\t\t\t\t<div className=\"kt-portlet__head-label\">\n\t\t\t\t\t<h3 className=\"kt-portlet__head-title\">Trending blogs</h3>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"kt-portlet__body\">\n\t\t\t\t<div className=\"kt-widget4\">\n\t\t\t\t\t{blogsData.loading && <BlogListItemSkeleton></BlogListItemSkeleton>}\n\t\t\t\t\t{data.map(blog => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={blog.id} className=\"kt-widget4__item \">\n\t\t\t\t\t\t\t\t<div className=\"kt-widget4__pic kt-widget4__pic--pic \">\n\t\t\t\t\t\t\t\t\t<img alt=\"Blog image\" style={{ width: '7.5rem' }} src={blog.image} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"kt-widget4__info\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: '1.2rem' }}\n\t\t\t\t\t\t\t\t\t\tclassName=\"kt-widget4__username\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleRouteBlog(blog.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{blog.title}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a className=\"kt-widget4__text\" onClick={() => handleRouteBlog(blog.id)}>\n\t\t\t\t\t\t\t\t\t\t{moment(blog.createdAt).format('DD-MMM-YYYY')}{' '}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a className=\"kt-widget4__text\" onClick={() => handleRouteUser(blog.author._id)}>\n\t\t\t\t\t\t\t\t\t\t{blog.author.username}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/* <a className=\"btn btn-sm btn-label-dark\">Follow</a> */}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default injectIntl(withSnackbar(BlogList));\n"]},"metadata":{},"sourceType":"module"}